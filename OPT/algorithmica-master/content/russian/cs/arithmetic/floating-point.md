---
title: Вещественные числа
authors:
- Сергей Слотин
date: 2021-08-21
weight: 2
draft: true
---


$$
1.2345 =
\underbrace{12345}\_\text{mantissa}
\times {\underbrace{10}\_\text{base}\\!\\!\\!\\!}
      ^{\overbrace{-4}^\text{exponent}}
$$


$$
42 = 10101_2 = 1.0101_2 \times 2^5
$$

> Первое правило вещественных чисел — не использовать вещественные числа

Все переменные типа `double` хранятся в компьютере неточно (ну а как вы представите ⅓ в двоичной системе счисления?). Поэтому при работе с даблами нужно **всегда** учитывать эту погрешность. Например, чтобы сравнить два дабла, надо проверить, что они отличаются по модулю меньше, чем на очень маленькое число `eps`:

```c++
const double eps = 1e-8;

bool eq (double a, double b) { return abs(a-b) < eps }
```

Чтобы так не делать, старайтесь по возможности использовать только инты и абсолютную точность. Иногда есть трюки, позволяющие так делать: например, если в задаче все входные точки целочисленные и нас просят посчитать какую-то площадь, то можно все координаты домножить на два, и тогда ответ тоже будет целым (см. векторное произведение), который только при выводе нужно будет поделить на четыре.

### $0 \neq -0$

Действительные числа так хранятся, что $0$ и $-0$ могут быть разными числами. Имейте это ввиду.

### Область определения обратных функций

`acos`, `asin` и прочие обратные тригонометрические функций требуют, чтобы им на вход подавалось число от -1 до 1. Для безопасности, отмасштабируйте числа, перед тем как брать от них эти функции.
